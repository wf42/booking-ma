[![paytabs Logo](https://www.paytabs.com/theme/frontend_v2/img/logo_blue.png)](http://paytabs.com/)

## Installation

```bash
package.json

{
    "dependencies": {
        "paytabs":"*"
    }
}

$ npm install
```

## Validate Secret Key
```js
var paytabs = require('paytabs')
paytabs.ValidateSecretKey("my email in the dashboard", "my secret Key", function(response){
  console.log(response);
});
```

output
```bash
  {
    "response_code":"4000",
    "result": "Valid Secret Key"
  }
```

## Create Pay Page
```js
var paytabs = require('paytabs');

var createPayPage = new Object()
  createPayPage.merchant_email= 'merchant email';
createPayPage.secret_key = "my secret_key";
createPayPage.site_url = "https://www.geniusescode.net";
createPayPage.return_url = "http://www.myreturn.com/";
createPayPage.title = "some title";
createPayPage.cc_first_name =  "ALGHABBAn";
createPayPage.cc_last_name= "ALGHABBAN";
createPayPage.cc_phone_number = "996";
createPayPage.phone_number = "50000000";
createPayPage.email = "clinet@outlook.com";
createPayPage.products_per_title = "some title";
createPayPage.unit_price = 150;
createPayPage.quantity=  "1";
createPayPage.other_charges = 0;
createPayPage.amount=  150;
createPayPage.discount = 0;
createPayPage.currency = "SAR";
createPayPage.reference_no =  "21873109128";
createPayPage.ip_customer = "192.168.1.1";
createPayPage.ip_merchant= "192.168.1.1";
createPayPage.billing_address = "Flat 11 Building 222 Block 333 Road 444 Riydh";
createPayPage.state =  "Riydh";
createPayPage.city = "Riydh";
createPayPage.postal_code=  "12345";
createPayPage.country =  "SAU";
createPayPage.shipping_first_name =  "Clinicarea";
createPayPage.shipping_last_name = "app";
createPayPage.address_shipping = "Flat abc road 123";
createPayPage.city_shipping = "Riydh";
createPayPage.state_shipping=  "Riydh";
createPayPage.postal_code_shipping = "403129";
createPayPage.country_shipping =  "SAU";
createPayPage.msg_lang = "ar";
createPayPage.cms_with_version = "1.0.0";

paytabs.CreatePayPage(createPayPage, function(response){
  console.log(response);
});
```

Output

```bash
{
   result: 'The Pay Page is created.',
  response_code: '4012',
  payment_url: 'https://www.paytabs.com/4PCVv3Fzs9KQKOj4irvI6vdtxk8SD7EHsTIq4lXqSRJrk/UI5zvL-PDwIFAcK-ZCV1ueT3cWT3OYzuoQHdOhTDmM4zc/L6UT0Z88Y2D0NVaho5d8K2I0arPgb8YPJ3-ceXWtRfLis/XbA53TERzHSqoymCZmwWL1EsUQTUM0VKJrPlZDiSZqxDGzLAfNSt9Ds0Bfd-6mi9CV3b0yZfE2hVkHMqhG_Rv_Ilmw',
  p_id: 37250
}
```

## Verify Payment
```js
var paytabs = require('paytabs');
var verfiyPaymentRequest = new Object();
verfiyPaymentRequest.merchant_email = "merchant_email";
verfiyPaymentRequest.secret_key = "secret_key";
verfiyPaymentRequest.payment_reference = "payment_reference";
paytabs.VerifyPayment(verfiyPaymentRequest, function(response){
  console.log(response);
});
```

Output

```bash
{
  result: 'The payment is completed successfully!',
  response_code: '100',
  pt_invoice_id: '37250',
  amount: 150,
  currency: 'SAR',
  transaction_id: '31245'
}
```
